---
import { getCollection } from "astro:content";
import Container from "../components/Container.astro";
import PageHeading from "../components/PageHeading.astro";
import Prose from "../components/Prose.astro";
import Layout from "../layouts/Layout.astro";
import PageStandard from "../layouts/PageStandard.astro";

const teamEntries = await getCollection("team");

const teammates = await Promise.all(
  teamEntries.map(async (entry) => {
    const { data } = entry;
    const { Content } = await entry.render();

    return { Content, data };
  }),
);

const teammatesSorted = teammates.toSorted(
  (a, b) => a.data.order - b.data.order,
);
---

<Layout title="About | Agathist">
  <PageStandard>
    <Container>
      <div class="flex flex-col gap-8">
        <PageHeading>About</PageHeading>

        <section class="flex flex-col gap-16 pb-32">
          <Prose>
            <p>You might be asking yourself...</p>
          </Prose>

          <h2 class="font-serif text-5xl">Why "Agathist"?</h2>

          <div
            class="flex max-w-prose flex-col gap-8 text-xl font-light leading-relaxed md:text-2xl md:leading-relaxed"
          >
            <p>
              "Agathist" is derived from the Greek word <em>agathos</em>, which
              means "good". An agathist is one who believes that all things
              trend towards "the good".
            </p>

            <p>
              However, do not mistake an agathist for an optimist. This isn't
              aboutn finding silver linings or saying things aren't as bad as
              they seem. Agathism is about acknowledging reality, even when it
              isn't pretty, and doing the work to make it better, one action at
              a time.
            </p>
            <p>
              <em>That's</em> how we do things around here.
            </p>
          </div>
        </section>
      </div>
    </Container>

    <section
      class="bg-gradient-to-b from-slate-900 via-pink-900 to-slate-900 py-32"
    >
      <Container>
        <div class="flex flex-col gap-16">
          <h2 class="font-serif text-5xl">Meet our team</h2>

          <div class="flex flex-col gap-16">
            {
              teammatesSorted.map(({ Content, data }) => (
                <div class="flex gap-8 rounded-lg bg-slate-900/50 p-8">
                  <div class="h-48 w-48 shrink-0 grow-0 rounded-2xl bg-white/10">
                    {data.imgUrl && <img src={data.imgUrl} alt={data.name} />}
                  </div>

                  <div class="flex shrink grow flex-col gap-8">
                    <div class="flex flex-col gap-2">
                      <div class="font-serif text-4xl">{data.name}</div>
                      <div class="text-xl font-light tracking-wider text-pink-400">
                        {data.role}
                      </div>
                    </div>

                    <Prose>
                      <Content />
                    </Prose>
                  </div>
                </div>
              ))
            }
          </div>
        </div>
      </Container>
    </section>
  </PageStandard>
</Layout>
